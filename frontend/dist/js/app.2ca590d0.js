(function(){"use strict";var e={1914:function(e,t,n){var o=n(5130),a=n(6768);const r={id:"app"};function l(e,t,n,o,l,s){const i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(i)])}var s=(0,a.pM)({name:"App"}),i=n(1241);const c=(0,i.A)(s,[["render",l],["__scopeId","data-v-1afe0968"]]);var u=c,d=n(1387),p=n(9005);const g=(0,p.nY)("user",{state:()=>({uid:null,displayName:null,photoURL:null}),actions:{setUser(e){this.uid=e.uid,this.displayName=e.displayName,this.photoURL=e.photoURL},clearUser(){this.uid=null,this.displayName=null,this.photoURL=null}}}),m=(0,p.nY)("menu",{state:()=>({isMenuOpen:!1}),actions:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen},closeMenu(){this.isMenuOpen=!1}}});var h=n(4232);const f={class:"min-h-screen flex"},b={class:"mt-4"};function v(e,t,n,o,r,l){const s=(0,a.g2)("NavigationMenu"),i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(s,{onLogout:e.logout},null,8,["onLogout"]),(0,a.Lk)("div",{class:(0,h.C4)(["bg-paper-yellow p-8 transition-all duration-300 flex-grow",{"md:ml-[1%]":!e.menuStore.isMenuOpen}])},[(0,a.Lk)("div",b,[(0,a.bF)(i)])],2)])}n(4114);var x=n(144);async function k(){if("undefined"===typeof window.ethereum)return console.error("Metamask is not installed"),null;try{const e=await window.ethereum.request({method:"eth_requestAccounts"});return e[0]}catch(e){return console.error("Error connecting to Metamask:",e),null}}async function y(e,t){const n=`Please sign this message to authenticate.\nNonce: ${t}`;try{const t=await window.ethereum.request({method:"personal_sign",params:[n,e]});return t}catch(o){return console.error("Error signing message:",o),null}}var w=n(5860),L=n(6400),C=n(9218),E=n(7617);const _={apiKey:"AIzaSyAx7UIjIqV-xfkfA2VeEsfhvZV4hWjS2H4",authDomain:"kids-ai-lab.firebaseapp.com",projectId:"kids-ai-lab",storageBucket:"kids-ai-lab.appspot.com",messagingSenderId:"785260278464",appId:"1:785260278464:web:12393a5918b1d019503325",measurementId:"G-P6JMX6NN5S"},j=(0,L.Wp)(_),F=((0,E.aU)(),(0,w.xI)()),M=((0,C.Uz)(j,"asia-northeast1"),new w.HF);function z(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}const T=(0,p.nY)("auth",(()=>{const e=(0,x.KR)(null),t=(0,x.KR)(!1),n=(0,x.KR)(null),o=(0,x.KR)(null),a=async()=>{const o=await k();if(o){n.value=z();const a=await y(o,n.value);a&&(e.value=o,t.value=!0)}},r=async()=>{const e=new w.HF;try{const n=await(0,w.df)(F,e);o.value=n.user,t.value=!0}catch(n){console.error("Googleログインエラー:",n)}},l=e=>{o.value=e,t.value=!0},s=()=>{e.value=null,o.value=null,t.value=!1,n.value=null,F.signOut()};return{walletAddress:e,isSigned:t,nonce:n,googleUser:o,loginWithMetamask:a,loginWithGoogle:r,logout:s,setUser:l}}));var A=n.p+"img/logo.9b5d2988.png";const P=e=>((0,a.Qi)("data-v-0e8ab3d8"),e=e(),(0,a.jt)(),e),S=P((()=>(0,a.Lk)("img",{src:A,alt:"Logo",class:"top-16 left-4 w-16 h-16",style:{height:"25px",width:"auto"}},null,-1))),q=P((()=>(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1))),O=[q],R=P((()=>(0,a.Lk)("div",{class:"mt-8"},null,-1))),U={class:"mb-4"},I=P((()=>(0,a.Lk)("i",{class:"fas fa-pencil-alt mr-2"},null,-1))),K={class:"mb-4"},X=P((()=>(0,a.Lk)("i",{class:"fas fa-user-edit mr-2"},null,-1))),W={class:"mb-4"},B=P((()=>(0,a.Lk)("i",{class:"fas fa-users mr-2"},null,-1))),N=P((()=>(0,a.Lk)("li",{class:"mb-4"},[(0,a.Lk)("hr",{class:"my-4 border-t border-gray-300"})],-1))),$={class:"mb-4"},V=P((()=>(0,a.Lk)("i",{class:"fas fa-question mr-2"},null,-1))),G=P((()=>(0,a.Lk)("li",{class:"mb-4"},[(0,a.Lk)("hr",{class:"my-4 border-t border-gray-3000"})],-1))),Q={class:"mb-4"},H=P((()=>(0,a.Lk)("i",{class:"fas fa-sign-out-alt mr-2"},null,-1))),J=P((()=>(0,a.Lk)("div",{class:"absolute bottom-4 text-sm text-gray-400"}," Powered by OCT-PATH ",-1))),D=P((()=>(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})],-1))),Y=[D];function Z(e,t,n,o,r,l){const s=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,h.C4)(["w-[300px] bg-white text-gray-500 font-sans p-6 fixed h-full top-0 left-0 z-40 transition-transform duration-300 md:relative md:block md:w-[300px] md:translate-x-0",{"transform -translate-x-full":!e.menuStore.isMenuOpen,"transform translate-x-0":e.menuStore.isMenuOpen}])},[S,(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.menuStore.closeMenu&&e.menuStore.closeMenu(...t)),class:"md:hidden fixed z-50 top-4 left-[250px] hover-element"},O),R,(0,a.Lk)("ul",null,[(0,a.Lk)("li",U,[(0,a.bF)(s,{to:"/contents/picture-book-create",onClick:e.closeMenu,class:"block p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},{default:(0,a.k6)((()=>[I,(0,a.eW)(" えほんをつくる")])),_:1},8,["onClick"])]),(0,a.Lk)("li",K,[(0,a.bF)(s,{to:"/contents/picture-book-read",onClick:e.closeMenu,class:"block p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},{default:(0,a.k6)((()=>[X,(0,a.eW)(" じぶんのえほんをよむ")])),_:1},8,["onClick"])]),(0,a.Lk)("li",W,[(0,a.bF)(s,{to:"/contents/picture-book-read-public",onClick:e.closeMenu,class:"block p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},{default:(0,a.k6)((()=>[B,(0,a.eW)(" みんなのえほんをよむ")])),_:1},8,["onClick"])]),N,(0,a.Lk)("li",$,[(0,a.bF)(s,{to:"/contents/mugen-quiz",onClick:e.closeMenu,class:"block p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},{default:(0,a.k6)((()=>[V,(0,a.eW)(" むげんクイズ")])),_:1},8,["onClick"])]),G,(0,a.Lk)("li",Q,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("logout")),class:"w-full text-left p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},[H,(0,a.eW)(" ログアウト ")])])]),J],2),e.menuStore.isMenuOpen?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...t)=>e.menuStore.toggleMenu&&e.menuStore.toggleMenu(...t)),class:"fixed z-20 md:hidden top-4 left-4 hover-element"},Y))])}var ee=(0,a.pM)({name:"NavigationMenu",setup(){const e=(0,d.rd)(),t=g(),n=m(),o=()=>{window.innerWidth<=768&&n.closeMenu()},a=()=>{t.clearUser(),n.closeMenu(),e.push({name:"LoginSns"})};return{logout:a,menuStore:n,closeMenu:o}}});const te=(0,i.A)(ee,[["render",Z],["__scopeId","data-v-0e8ab3d8"]]);var ne=te,oe=(0,a.pM)({components:{NavigationMenu:ne},setup(){const e=T(),t=(0,d.rd)(),n=m(),o=()=>{e.logout(),t.push({name:"LoginSns"})};return{logout:o,menuStore:n}}});const ae=(0,i.A)(oe,[["render",v],["__scopeId","data-v-5385c3cf"]]);var re=ae;const le=e=>((0,a.Qi)("data-v-6b6fba8b"),e=e(),(0,a.jt)(),e),se={class:"container mx-auto px-4 mt-[-20px]"},ie=le((()=>(0,a.Lk)("h2",{class:"text-4xl font-bold mb-4 text-center text-purple-700"},[(0,a.Lk)("i",{class:"fas fa-pencil-alt mr-2"}),(0,a.eW)(" えほんをつくる ")],-1))),ce=le((()=>(0,a.Lk)("p",{class:"text-gray-500 mb-6 text-lg"}," AI🤖にてつだってもらって、じぶんだけの「えほん」をつくろう💪 きほんは「きしょうてんけつ」だ🔥 つくった「えほん」はせかいのみんながみれるよ🌏 はりきってつくろう❤️ ",-1))),ue=le((()=>(0,a.Lk)("hr",{class:"my-8 border-t-2 border-dashed border-gray-300"},null,-1))),de={class:"space-y-6"},pe=le((()=>(0,a.Lk)("label",{for:"ki",class:"block text-lg font-bold text-gray-700"},"✏️ 起（き）：はじまりをかこう",-1))),ge=le((()=>(0,a.Lk)("label",{for:"sho",class:"block text-lg font-bold text-gray-700"},"✏️ 承（しょう）：ものがたりをすすめよう",-1))),me=le((()=>(0,a.Lk)("label",{for:"ten",class:"block text-lg font-bold text-gray-700"},"✏️ 転（てん）：なにかへんかをおこそう",-1))),he=le((()=>(0,a.Lk)("label",{for:"ketsu",class:"block text-lg font-bold text-gray-700"},"✏️ 結（けつ）：おわりをかこう",-1))),fe=["disabled"],be={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ve=le((()=>(0,a.Lk)("div",{class:"bg-white p-6 rounded-lg shadow-lg text-center"},[(0,a.Lk)("p",{class:"text-xl mb-4"},"かんせいするまでじかんがかかるよ🙏"),(0,a.Lk)("div",{class:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"})],-1))),xe=[ve],ke={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ye={class:"bg-white p-6 rounded-lg shadow-lg text-center"},we=le((()=>(0,a.Lk)("h2",{class:"text-2xl font-bold mb-4"},"えほんがかんせいしました！🎉✨",-1))),Le=le((()=>(0,a.Lk)("p",{class:"mb-4"},"「えほんをよむ」からよんでみよう。",-1)));function Ce(e,t,n,r,l,s){return(0,a.uX)(),(0,a.CE)("div",se,[ie,ce,ue,(0,a.Lk)("div",de,[(0,a.Lk)("div",null,[pe,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.ki=t),type:"text",id:"ki",class:"mt-2 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"むかしむかし、ある村にタロウという男の子がすんでいました。"},null,512),[[o.Jo,e.ki]])]),(0,a.Lk)("div",null,[ge,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.sho=t),type:"text",id:"sho",class:"mt-2 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"タロウはある日、山へぼうけんにいった。"},null,512),[[o.Jo,e.sho]])]),(0,a.Lk)("div",null,[me,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.ten=t),type:"text",id:"ten",class:"mt-2 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"山の中でタロウはおおきなドラゴンにあった。"},null,512),[[o.Jo,e.ten]])]),(0,a.Lk)("div",null,[he,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.ketsu=t),type:"text",id:"ketsu",class:"mt-2 block w-full px-4 py-3 border border-gray-3000 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"タロウはドラゴンと村でたのしく一緒にくらしました。"},null,512),[[o.Jo,e.ketsu]])]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...t)=>e.createPictureBook&&e.createPictureBook(...t)),disabled:!e.isFormValid,class:"w-1/2 min-w-[300px] py-3 px-6 bg-purple-600 hover:bg-purple-700 text-white text-lg font-semibold rounded-md shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 mx-auto block disabled:opacity-50 disabled:cursor-not-allowed"}," えほんをつくる🎉✨ ",8,fe)]),e.isLoading?((0,a.uX)(),(0,a.CE)("div",be,xe)):(0,a.Q3)("",!0),e.showCompletionPopup?((0,a.uX)(),(0,a.CE)("div",ke,[(0,a.Lk)("div",ye,[we,Le,(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...t)=>e.closeCompletionPopup&&e.closeCompletionPopup(...t)),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded"}," とじる ")])])):(0,a.Q3)("",!0)])}const Ee="https://us-central1-kids-ai-lab.cloudfunctions.net";async function _e(e,t){try{const n=await Me(e,t),o=n.content_id,a=n.title,r=n.pages;return await ze(e,o,a,r)}catch(n){throw n instanceof Error?new Error("Failed to create and add contents: "+n.message):new Error("Failed to create and add contents: Unknown error")}}async function je(e,t){try{const n=t?`${Ee}/on_get_contents_list?google_id=${t}&page=${e}`:`${Ee}/on_get_contents_list?page=${e}`,o=n;console.log("url:",o);const a=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to get contents list");return await a.json()}catch(n){throw n instanceof Error?new Error("Failed to get contents list: "+n.message):new Error("Failed to get contents list: Unknown error")}}async function Fe(e){try{const t=await fetch(Ee+"/on_get_contents_detail?content_id="+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to get content detail");return await t.json()}catch(t){throw t instanceof Error?new Error("Failed to get content detail: "+t.message):new Error("Failed to get content detail: Unknown error")}}async function Me(e,t){const n=await fetch(Ee+"/on_make_contents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_id:e,text_data:t})});if(!n.ok)throw new Error("Failed to make contents");return await n.json()}async function ze(e,t,n,o){const a=await fetch(Ee+"/on_add_contents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_id:e,content_id:t,title:n,pages:o})});if(!a.ok)throw new Error("Failed to add contents");return await a.json()}var Te=(0,a.pM)({name:"PictureBookCreate",setup(){const e=g(),t=(0,x.KR)(""),n=(0,x.KR)(""),o=(0,x.KR)(""),r=(0,x.KR)(""),l=(0,a.EW)((()=>""!==t.value.trim()&&""!==n.value.trim()&&""!==o.value.trim()&&""!==r.value.trim())),s=(0,x.KR)(!1),i=(0,x.KR)(!1),c=async()=>{if(e.uid){s.value=!0;const l=`${t.value} ${n.value} ${o.value} ${r.value}`;try{await _e(e.uid,l),s.value=!1,i.value=!0}catch(a){console.error("Error creating picture book:",a),s.value=!1,alert("えほんの作成中にエラーが発生しました。もう一度お試しください。")}}else console.error("User is not logged in"),e.clearUser()},u=()=>{i.value=!1};return{ki:t,sho:n,ten:o,ketsu:r,isFormValid:l,isLoading:s,showCompletionPopup:i,createPictureBook:c,closeCompletionPopup:u}}});const Ae=(0,i.A)(Te,[["render",Ce],["__scopeId","data-v-6b6fba8b"]]);var Pe=Ae;const Se=e=>((0,a.Qi)("data-v-c9cf31dc"),e=e(),(0,a.jt)(),e),qe={class:"container mx-auto px-4 mt-[-20px]"},Oe={class:"text-4xl font-bold mb-4 text-center text-purple-700 mb-12"},Re={class:"overflow-x-auto"},Ue={key:0,class:"flex justify-center items-center h-64"},Ie=Se((()=>(0,a.Lk)("div",{class:"loadingSpinner"},null,-1))),Ke=[Ie],Xe={key:1},We={key:0,class:"text-center text-xl text-gray-500 py-8"},Be={key:1,class:"w-full bg-white rounded-lg overflow-hidden shadow-lg"},Ne=Se((()=>(0,a.Lk)("thead",{class:"bg-purple-200"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-4 py-3 text-left text-xl sm:table-cell hidden"}," つくった日 "),(0,a.Lk)("th",{class:"px-4 py-3 text-left text-xl"},"タイトル"),(0,a.Lk)("th",{class:"px-4 py-3 text-center text-xl"})])],-1))),$e={class:"px-4 py-3 text-lg sm:table-cell hidden"},Ve={class:"px-4 py-3 text-lg"},Ge={class:"px-4 py-3 text-center"},Qe=["onClick"],He={key:0,class:"mt-6 flex justify-center items-center"},Je=["disabled"],De={class:"text-xl"},Ye=["disabled"];var Ze=(0,a.pM)({__name:"PictureBookRead",props:{mode:{}},setup(e,{expose:t}){const n=e,o=(0,x.KR)([]),r=(0,x.KR)(1),l=(0,x.KR)(!1),s=(0,x.KR)(!0),i=g(),c=async()=>{s.value=!0;try{let e;console.log("currentPage.value: ",r.value),"personal"===n.mode&&i.uid?(console.log("fetchBooks__personal"),e=await je(r.value,i.uid)):(console.log("fetchBooks__public"),e=await je(r.value)),o.value=e.contents||[],l.value=e.hasNextPage||!1}catch(e){console.error("Error fetching books:",e),o.value=[],l.value=!1}finally{s.value=!1}};(0,a.sV)(c),(0,a.wB)((()=>n.mode),(e=>{console.log("mode change:",e),c()}),{immediate:!0});const u=()=>{r.value>1&&(r.value--,c())},d=()=>{l.value&&(r.value++,c())},p=e=>{const t=new Date(e);return t.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},m=async e=>{console.log(`Reading book with ID: ${e}`);try{s.value=!0;const t=await Fe(e);console.log("readBook__response: ",t);const n=t.pages,o=(0,x.KR)(0),r=(0,a.EW)((()=>n[o.value])),l=()=>{o.value<n.length-1&&o.value++},i=()=>{o.value>0&&o.value--},c=()=>{const e=document.createElement("div");e.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(255, 255, 255, 0.9);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n      ";const t=document.createElement("div");t.style.cssText="\n        background: #FFF9C4;\n        padding: 20px;\n        border-radius: 20px;\n        box-shadow: 0 0 20px rgba(0,0,0,0.2);\n        max-width: 95%;\n        max-height: 95%;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        position: relative;\n      ";const a=document.createElement("button");a.textContent="×",a.style.cssText="\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 36px;\n        cursor: pointer;\n        color: #FF6B6B;\n        width: 50px;\n        height: 50px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      ",a.onclick=()=>document.body.removeChild(e);const c=document.createElement("img");c.style.display="none",c.onload=()=>{s.value=!1,c.style.display="block"},c.src=r.value.page_url,c.style.cssText="\n        max-width: 100%;\n        height: auto;\n        max-height: 80vh;\n        object-fit: contain;\n        border-radius: 10px;\n        margin-bottom: 20px;\n      ";const u=document.createElement("div");u.style.cssText="\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        width: 100%;\n        max-width: 300px;\n      ";const d=document.createElement("div");d.style.cssText="\n        font-size: 18px;\n        margin: 0 10px;\n      ",d.textContent=`${o.value+1} / ${n.length}`;const p=(e,t)=>{const a=document.createElement("button");return a.textContent=e,a.style.cssText="\n          background: #4CAF50;\n          color: white;\n          border: none;\n          padding: 10px 20px;\n          border-radius: 20px;\n          font-size: 16px;\n          cursor: pointer;\n          transition: background 0.3s;\n        ",a.onmouseover=()=>a.style.background="#45a049",a.onmouseout=()=>a.style.background="#4CAF50",a.onclick=()=>{t(),c.src=r.value.page_url,d.textContent=`${o.value+1} / ${n.length}`},a},g=p("まえ",i),m=p("つぎ",l);u.appendChild(g),u.appendChild(d),u.appendChild(m),t.appendChild(a),t.appendChild(c),t.appendChild(u),e.appendChild(t),document.body.appendChild(e)};c()}catch(t){console.error("Error fetching books:",t),s.value=!1}},f=(0,a.EW)((()=>(console.log("props.mode: ",n.mode),"personal"===n.mode?"じぶんのえほんをよむ":"みんなのえほんをよむ"))),b=(0,a.EW)((()=>"personal"===n.mode?"fas fa-user-edit mr-2":"fas fa-users mr-2"));return t({books:o,currentPage:r,hasNextPage:l,prevPage:u,nextPage:d,formatDate:p,readBook:m,isLoading:s,pageTitle:f}),(e,t)=>((0,a.uX)(),(0,a.CE)("div",qe,[(0,a.Lk)("h2",Oe,[(0,a.Lk)("i",{class:(0,h.C4)(b.value)},null,2),(0,a.eW)(" "+(0,h.v_)(f.value),1)]),(0,a.Lk)("div",Re,[s.value?((0,a.uX)(),(0,a.CE)("div",Ue,Ke)):((0,a.uX)(),(0,a.CE)("div",Xe,[0===o.value.length?((0,a.uX)(),(0,a.CE)("div",We," えほんはまだないよ。つくってみよう！ ")):((0,a.uX)(),(0,a.CE)("table",Be,[Ne,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.value,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"border-b border-gray-200 hover:bg-purple-50"},[(0,a.Lk)("td",$e,(0,h.v_)(p(e.date)),1),(0,a.Lk)("td",Ve,(0,h.v_)(e.title),1),(0,a.Lk)("td",Ge,[(0,a.Lk)("button",{onClick:t=>m(e.content_id),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 whitespace-nowrap"}," よむ ",8,Qe)])])))),128))])]))]))]),!s.value&&o.value.length>0&&(l.value||r.value>1)?((0,a.uX)(),(0,a.CE)("div",He,[(0,a.Lk)("button",{onClick:u,disabled:1===r.value,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full mr-4 disabled:opacity-50"}," まえ ",8,Je),(0,a.Lk)("span",De,(0,h.v_)(r.value),1),(0,a.Lk)("button",{onClick:d,disabled:!l.value,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full ml-4 disabled:opacity-50"}," つぎ ",8,Ye)])):(0,a.Q3)("",!0)]))}});const et=(0,i.A)(Ze,[["__scopeId","data-v-c9cf31dc"]]);var tt=et,nt=n.p+"img/top.7471951f.jpg";const ot=e=>((0,a.Qi)("data-v-6ed86075"),e=e(),(0,a.jt)(),e),at={class:"min-h-screen flex"},rt={class:"w-full md:w-3/12 flex flex-col justify-center items-center bg-white"},lt=ot((()=>(0,a.Lk)("img",{src:A,alt:"Logo",class:"absolute top-12 left-4 w-16 h-16",style:{height:"30px",width:"auto"}},null,-1))),st={class:"max-w-md w-full p-8",style:{"margin-top":"-300px"}},it=ot((()=>(0,a.Lk)("h2",{class:"text-3xl font-bold mb-6 text-left text-purple-700"}," Sign up ",-1))),ct=["disabled"],ut={key:0},dt={key:1,class:"flex items-center justify-center"},pt=ot((()=>(0,a.Lk)("svg",{class:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24"},[(0,a.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,a.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1))),gt=ot((()=>(0,a.Lk)("div",{class:"absolute bottom-4 text-sm text-gray-400"}," Powered by OCT-PATH ",-1))),mt=ot((()=>(0,a.Lk)("div",{class:"hidden md:block md:w-9/12 relative"},[(0,a.Lk)("img",{src:nt,alt:"Top Image",class:"absolute left-0 top-0 h-full w-full object-cover object-left"})],-1)));function ht(e,t,n,o,r,l){return(0,a.uX)(),(0,a.CE)("div",at,[(0,a.Lk)("div",rt,[lt,(0,a.Lk)("div",st,[it,(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.loginWithGoogle&&e.loginWithGoogle(...t)),class:"w-full py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75",disabled:e.isLoading},[e.isLoading?((0,a.uX)(),(0,a.CE)("span",dt,[pt,(0,a.eW)(" Loading... ")])):((0,a.uX)(),(0,a.CE)("span",ut,"Continue with Google"))],8,ct)]),gt]),mt])}const ft="https://us-central1-kids-ai-lab.cloudfunctions.net";async function bt(e,t,n){const o=await fetch(ft+"/on_add_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_id:e,name:t,image_url:n})});if(!o.ok)throw new Error("Failed to sign up");return await o.json()}var vt=bt,xt=(0,a.pM)({setup(){const e=g(),t=(0,d.rd)(),n=(0,x.KR)(!1),o=async()=>{n.value=!0;try{const n=await(0,w.df)(F,M),o=n.user;e.setUser(o),console.log("Login successful:",o.uid,o.displayName,o.photoURL),await vt(o.uid,o.displayName||"匿名ユーザー",o.photoURL||"https://www.gravatar.com/avatar/[MD5ハッシュ]?d=mp&s=200"),await t.push({name:"PictureBookCreate"}),console.log("push:",t.currentRoute.value.name)}catch(o){console.error("Google Sign-In Error: ",o)}n.value=!1};return{loginWithGoogle:o,isLoading:n}}});const kt=(0,i.A)(xt,[["render",ht],["__scopeId","data-v-6ed86075"]]);var yt=kt;const wt="https://us-central1-kids-ai-lab.cloudfunctions.net";async function Lt(e,t){try{const n=await fetch(wt+"/on_update_quiz_level",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_id:e,level:t})});if(!n.ok)throw new Error("Failed to update quiz level");return await n.json()}catch(n){throw n instanceof Error?new Error("Failed to update quiz level: "+n.message):new Error("Failed to update quiz level: Unknown error")}}async function Ct(e){try{const t=await fetch(wt+"/on_get_quiz_level?google_id="+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to get quiz level");return await t.json()}catch(t){throw t instanceof Error?new Error("Failed to get quiz level: "+t.message):new Error("Failed to get quiz level: Unknown error")}}async function Et(e){try{const t=await fetch(wt+"/on_make_quiz?level="+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to get quiz by level");return await t.json()}catch(t){throw t instanceof Error?new Error("Failed to get quiz by level: "+t.message):new Error("Failed to get quiz by level: Unknown error")}}const _t=e=>((0,a.Qi)("data-v-49c9c53a"),e=e(),(0,a.jt)(),e),jt={class:"container mx-auto px-4 mt-[-20px]"},Ft=_t((()=>(0,a.Lk)("h2",{class:"text-4xl font-bold mb-4 text-center text-purple-700"},[(0,a.Lk)("i",{class:"fas fa-question-circle mr-2"}),(0,a.eW)(" むげんクイズ ")],-1))),Mt=_t((()=>(0,a.Lk)("p",{class:"text-center text-lg mb-4 text-gray-600"}," AIが むげん にクイズを作ってくれるゾ🔥 ",-1))),zt={class:"text-center mb-4"},Tt={class:"text-xl text-gray-700"},At={class:"text-xl text-gray-700"},Pt=_t((()=>(0,a.Lk)("p",{class:"text-center text-lg mb-4 text-gray-600"}," ルール：ぜんもんせいかい でレベルアップ⤴️、まちがえばレベルダウン⤵️ ",-1))),St=_t((()=>(0,a.Lk)("hr",{class:"my-8 border-t-2 border-dashed border-gray-300"},null,-1))),qt=_t((()=>(0,a.Lk)("p",{class:"text-center text-lg mb-4 text-gray-600"},"もんだいをえらぼう！",-1))),Ot={class:"flex flex-wrap justify-center gap-4"},Rt={key:0,class:"loader"},Ut=["onClick"];var It={__name:"MugenQuiz",setup(e){const t=g(),n=(0,x.KR)(0),o=(0,x.KR)(""),r=(0,x.KR)([]),l=(0,x.KR)(!0),s=async()=>{l.value=!0;const e=await Ct(t.uid);n.value=e.level||0,o.value=c(n.value);const a=await Et(n.value);r.value=a.quiz,l.value=!1},i=async e=>{l.value=!0,n.value=e,await Lt(t.uid,e),await s(),l.value=!1},c=e=>e>=0&&e<=5?"クイズはじめて 🐣":e>=6&&e<=10?"クイズたんけん 🧭":e>=11&&e<=15?"クイズがんばや 💪":e>=16&&e<=20?"クイズちえのわ 🧠":e>=21&&e<=25?"クイズじょうず 🏅":e>=26&&e<=30?"クイズたつじん ":e>=31&&e<=35?"クイズつよい 🦾":e>=36&&e<=40?"クイズのう 🧙":e>=41&&e<=45?"クイズシニア 👴":e>=46&&e<=50?"クイズベテラン 🎖":e>=51&&e<=55?"クイズマスター 🧩":e>=56&&e<=60?"クイズグランドマスター 🏆":e>=61&&e<=65?"クイズエキスパート 🥈":e>=66&&e<=70?"クイズスペシャリスト 🥉":e>=71&&e<=75?"クイズウォリアー ⚔️":e>=76&&e<=80?"クイズナイト 🛡️":e>=81&&e<=85?"クイズレジェンド 🌟":e>=86&&e<=90?"クイズタイタン 🗿":e>=91&&e<=95?"クイズチャンピオン 🏅":e>=96&&e<=99?"クイズアルティメット 🔥":100==e?"クイズゴッド 👑":"称号なし",u=e=>{const t=document.createElement("div");t.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.8);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 1000;\n    ";const o=document.createElement("div");o.style.cssText="\n      background: #fff;\n      padding: 20px;\n      border-radius: 10px;\n      text-align: center;\n      max-width: 90%;\n      max-height: 90%;\n      overflow-y: auto;\n    ";const a=document.createElement("h2");a.textContent=e.question,a.style.cssText="\n      font-size: 24px;\n      margin-bottom: 20px;\n    ";const l=document.createElement("div");l.style.cssText="\n      display: flex;\n      flex-direction: column;\n      gap: 10px;\n    ";const s=Array.isArray(e.answerChoices)?e.answerChoices:Object.values(e.answerChoices);s.forEach(((o,a)=>{const s=document.createElement("button");s.textContent=o,s.style.cssText="\n        background: #4CAF50;\n        color: white;\n        border: none;\n        padding: 10px;\n        border-radius: 5px;\n        font-size: 18px;\n        cursor: pointer;\n        transition: background 0.3s;\n      ",s.onmouseover=()=>s.style.background="#45a049",s.onmouseout=()=>s.style.background="#4CAF50",s.onclick=async()=>{a===e.correctAnswer?(d("せいかいです！おめでとう！🎉",e.wisdomInformation),document.body.removeChild(t),r.value=r.value.filter((t=>t.quizNo!==e.quizNo)),0===r.value.length&&await i(n.value+1)):(d("ざんねん！😢",`正解は: ${e.correctAnswer+1}<br>${e.wisdomInformation}`),document.body.removeChild(t),await i(n.value-1))},l.appendChild(s)})),o.appendChild(a),o.appendChild(l),t.appendChild(o),document.body.appendChild(t)},d=(e,t)=>{const n=document.createElement("div");n.style.cssText="\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: #fff;\n      padding: 20px;\n      border-radius: 10px;\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n      z-index: 1001;\n      text-align: center;\n      width: 50%; /* デフォルトの横幅 */\n    ",window.innerWidth<=600&&(n.style.width="95%");const o=document.createElement("h2");o.textContent=e,o.style.cssText="\n      font-size: 24px;\n      margin-bottom: 10px;\n      color: #4CAF50;\n    ";const a=document.createElement("p");a.innerHTML=t,a.style.cssText="\n      font-size: 18px;\n      margin-bottom: 20px;\n    ";const r=document.createElement("button");r.textContent="閉じる",r.style.cssText="\n      background: #4CAF50;\n      color: white;\n      border: none;\n      padding: 10px 20px;\n      border-radius: 5px;\n      font-size: 16px;\n      cursor: pointer;\n      transition: background 0.3s;\n    ",r.onmouseover=()=>r.style.background="#45a049",r.onmouseout=()=>r.style.background="#4CAF50",r.onclick=()=>document.body.removeChild(n),n.appendChild(o),n.appendChild(a),n.appendChild(r),document.body.appendChild(n)};return(0,a.sV)((()=>{s()})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",jt,[Ft,Mt,(0,a.Lk)("div",zt,[(0,a.Lk)("p",Tt,"いまのレベル: "+(0,h.v_)(n.value),1),(0,a.Lk)("p",At,"ランク: "+(0,h.v_)(o.value),1)]),Pt,St,qt,(0,a.Lk)("div",Ot,[l.value?((0,a.uX)(),(0,a.CE)("div",Rt)):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(r.value,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.quizNo,onClick:t=>u(e),class:"bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white font-bold py-2 px-4 rounded-lg shadow-lg transform transition-transform hover:scale-105"},(0,h.v_)(e.word),9,Ut)))),128))])]))}};const Kt=(0,i.A)(It,[["__scopeId","data-v-49c9c53a"]]);var Xt=Kt;const Wt=[{path:"/",name:"LoginSns",component:yt},{path:"/contents",component:re,meta:{requiresAuth:!0},children:[{path:"picture-book-create",name:"PictureBookCreate",component:Pe,meta:{requiresAuth:!0}},{path:"picture-book-read",name:"PictureBookRead",component:tt,meta:{requiresAuth:!0},props:()=>({mode:"personal"})},{path:"picture-book-read-public",name:"PictureBookReadPublic",component:tt,meta:{requiresAuth:!0},props:()=>({mode:"all"})},{path:"mugen-quiz",name:"MugenQuiz",component:Xt,meta:{requiresAuth:!0}},{path:"",redirect:{name:"PictureBookCreate"}}]}],Bt=(0,d.aE)({history:(0,d.LA)(),routes:Wt});Bt.beforeEach((async(e,t,n)=>{const o=g(),a=m();e.matched.some((e=>e.meta.requiresAuth))&&!o.uid?n({name:"LoginSns"}):("LoginSns"===e.name&&a.closeMenu(),n())}));var Nt=Bt;const $t=(0,o.Ef)(u),Vt=(0,p.Ey)();$t.use(Nt),$t.use(Vt),$t.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,i=0;i<o.length;i++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/"}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,l=o[0],s=o[1],i=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(i)var u=i(n)}for(t&&t(o);c<l.length;c++)r=l[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(1914)}));o=n.O(o)})();
//# sourceMappingURL=app.2ca590d0.js.map