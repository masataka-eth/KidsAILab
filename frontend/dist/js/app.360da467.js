(function(){"use strict";var e={330:function(e,t,o){var n=o(5130),a=o(6768);const l={id:"app"};function r(e,t,o,n,r,s){const i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(i)])}var s=(0,a.pM)({name:"App"}),i=o(1241);const c=(0,i.A)(s,[["render",r],["__scopeId","data-v-1afe0968"]]);var u=c,d=o(1387),p=o(9005);const g=(0,p.nY)("user",{state:()=>({uid:null,displayName:null,photoURL:null}),actions:{setUser(e){this.uid=e.uid,this.displayName=e.displayName,this.photoURL=e.photoURL},clearUser(){this.uid=null,this.displayName=null,this.photoURL=null}}}),h=(0,p.nY)("menu",{state:()=>({isMenuOpen:!1}),actions:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen},closeMenu(){this.isMenuOpen=!1}}});var m=o(4232);const f={class:"min-h-screen flex"},b={class:"mt-4"};function v(e,t,o,n,l,r){const s=(0,a.g2)("NavigationMenu"),i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(s,{onLogout:e.logout},null,8,["onLogout"]),(0,a.Lk)("div",{class:(0,m.C4)(["bg-paper-yellow p-8 transition-all duration-300 flex-grow",{"md:ml-[1%]":!e.menuStore.isMenuOpen}])},[(0,a.Lk)("div",b,[(0,a.bF)(i)])],2)])}o(4114);var k=o(144);async function x(){if("undefined"===typeof window.ethereum)return console.error("Metamask is not installed"),null;try{const e=await window.ethereum.request({method:"eth_requestAccounts"});return e[0]}catch(e){return console.error("Error connecting to Metamask:",e),null}}async function y(e,t){const o=`Please sign this message to authenticate.\nNonce: ${t}`;try{const t=await window.ethereum.request({method:"personal_sign",params:[o,e]});return t}catch(n){return console.error("Error signing message:",n),null}}var w=o(5860),L=o(6400),C=o(9218),_=o(7617);const E={apiKey:"AIzaSyAx7UIjIqV-xfkfA2VeEsfhvZV4hWjS2H4",authDomain:"kids-ai-lab.firebaseapp.com",projectId:"kids-ai-lab",storageBucket:"kids-ai-lab.appspot.com",messagingSenderId:"785260278464",appId:"1:785260278464:web:12393a5918b1d019503325",measurementId:"G-P6JMX6NN5S"},M=(0,L.Wp)(E),j=((0,_.aU)(),(0,w.xI)()),P=((0,C.Uz)(M,"asia-northeast1"),new w.HF);function S(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}const F=(0,p.nY)("auth",(()=>{const e=(0,k.KR)(null),t=(0,k.KR)(!1),o=(0,k.KR)(null),n=(0,k.KR)(null),a=async()=>{const n=await x();if(n){o.value=S();const a=await y(n,o.value);a&&(e.value=n,t.value=!0)}},l=async()=>{const e=new w.HF;try{const o=await(0,w.df)(j,e);n.value=o.user,t.value=!0}catch(o){console.error("Googleログインエラー:",o)}},r=e=>{n.value=e,t.value=!0},s=()=>{e.value=null,n.value=null,t.value=!1,o.value=null,j.signOut()};return{walletAddress:e,isSigned:t,nonce:o,googleUser:n,loginWithMetamask:a,loginWithGoogle:l,logout:s,setUser:r}}));var O=o.p+"img/logo.9b5d2988.png";const R=e=>((0,a.Qi)("data-v-3af6a34f"),e=e(),(0,a.jt)(),e),T=R((()=>(0,a.Lk)("img",{src:O,alt:"Logo",class:"top-16 left-4 w-16 h-16",style:{height:"25px",width:"auto"}},null,-1))),A=R((()=>(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1))),U=[A],B=R((()=>(0,a.Lk)("div",{class:"mt-8"},null,-1))),I={class:"mb-4"},W=R((()=>(0,a.Lk)("i",{class:"fas fa-pencil-alt mr-2"},null,-1))),X={class:"mb-4"},K=R((()=>(0,a.Lk)("i",{class:"fas fa-user-edit mr-2"},null,-1))),z={class:"mb-4"},N=R((()=>(0,a.Lk)("i",{class:"fas fa-users mr-2"},null,-1))),$=R((()=>(0,a.Lk)("li",{class:"mb-4"},[(0,a.Lk)("hr",{class:"my-4 border-t border-gray-300"})],-1))),V={class:"mb-4"},G=R((()=>(0,a.Lk)("i",{class:"fas fa-sign-out-alt mr-2"},null,-1))),q=R((()=>(0,a.Lk)("div",{class:"absolute bottom-4 text-sm text-gray-400"}," Powered by OCT-PATH ",-1))),H=R((()=>(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})],-1))),J=[H];function Q(e,t,o,n,l,r){const s=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,m.C4)(["w-[300px] bg-white text-gray-500 font-sans p-6 fixed h-full top-0 left-0 z-40 transition-transform duration-300 md:relative md:block md:w-[300px] md:translate-x-0",{"transform -translate-x-full":!e.menuStore.isMenuOpen,"transform translate-x-0":e.menuStore.isMenuOpen}])},[T,(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.menuStore.closeMenu&&e.menuStore.closeMenu(...t)),class:"md:hidden fixed z-50 top-4 left-[250px] hover-element"},U),B,(0,a.Lk)("ul",null,[(0,a.Lk)("li",I,[(0,a.bF)(s,{to:"/contents/picture-book-create",onClick:e.closeMenu,class:"block p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},{default:(0,a.k6)((()=>[W,(0,a.eW)(" えほんをつくる")])),_:1},8,["onClick"])]),(0,a.Lk)("li",X,[(0,a.bF)(s,{to:"/contents/picture-book-read",onClick:e.closeMenu,class:"block p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},{default:(0,a.k6)((()=>[K,(0,a.eW)(" じぶんのえほんをよむ")])),_:1},8,["onClick"])]),(0,a.Lk)("li",z,[(0,a.bF)(s,{to:"/contents/picture-book-read-public",onClick:e.closeMenu,class:"block p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},{default:(0,a.k6)((()=>[N,(0,a.eW)(" みんなのえほんをよむ")])),_:1},8,["onClick"])]),$,(0,a.Lk)("li",V,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("logout")),class:"w-full text-left p-2 rounded-lg transition-colors duration-200 ease-in-out hover:bg-gray-100 dark:hover:bg-paper-yellow"},[G,(0,a.eW)(" ログアウト ")])])]),q],2),e.menuStore.isMenuOpen?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...t)=>e.menuStore.toggleMenu&&e.menuStore.toggleMenu(...t)),class:"fixed z-20 md:hidden top-4 left-4 hover-element"},J))])}var D=(0,a.pM)({name:"NavigationMenu",setup(){const e=(0,d.rd)(),t=g(),o=h(),n=()=>{window.innerWidth<=768&&o.closeMenu()},a=()=>{t.clearUser(),o.closeMenu(),e.push({name:"LoginSns"})};return{logout:a,menuStore:o,closeMenu:n}}});const Y=(0,i.A)(D,[["render",Q],["__scopeId","data-v-3af6a34f"]]);var Z=Y,ee=(0,a.pM)({components:{NavigationMenu:Z},setup(){const e=F(),t=(0,d.rd)(),o=h(),n=()=>{e.logout(),t.push({name:"LoginSns"})};return{logout:n,menuStore:o}}});const te=(0,i.A)(ee,[["render",v],["__scopeId","data-v-5385c3cf"]]);var oe=te;const ne=e=>((0,a.Qi)("data-v-6b6fba8b"),e=e(),(0,a.jt)(),e),ae={class:"container mx-auto px-4 mt-[-20px]"},le=ne((()=>(0,a.Lk)("h2",{class:"text-4xl font-bold mb-4 text-center text-purple-700"},[(0,a.Lk)("i",{class:"fas fa-pencil-alt mr-2"}),(0,a.eW)(" えほんをつくる ")],-1))),re=ne((()=>(0,a.Lk)("p",{class:"text-gray-500 mb-6 text-lg"}," AI🤖にてつだってもらって、じぶんだけの「えほん」をつくろう💪 きほんは「きしょうてんけつ」だ🔥 つくった「えほん」はせかいのみんながみれるよ🌏 はりきってつくろう❤️ ",-1))),se=ne((()=>(0,a.Lk)("hr",{class:"my-8 border-t-2 border-dashed border-gray-300"},null,-1))),ie={class:"space-y-6"},ce=ne((()=>(0,a.Lk)("label",{for:"ki",class:"block text-lg font-bold text-gray-700"},"✏️ 起（き）：はじまりをかこう",-1))),ue=ne((()=>(0,a.Lk)("label",{for:"sho",class:"block text-lg font-bold text-gray-700"},"✏️ 承（しょう）：ものがたりをすすめよう",-1))),de=ne((()=>(0,a.Lk)("label",{for:"ten",class:"block text-lg font-bold text-gray-700"},"✏️ 転（てん）：なにかへんかをおこそう",-1))),pe=ne((()=>(0,a.Lk)("label",{for:"ketsu",class:"block text-lg font-bold text-gray-700"},"✏️ 結（けつ）：おわりをかこう",-1))),ge=["disabled"],he={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},me=ne((()=>(0,a.Lk)("div",{class:"bg-white p-6 rounded-lg shadow-lg text-center"},[(0,a.Lk)("p",{class:"text-xl mb-4"},"かんせいするまでじかんがかかるよ🙏"),(0,a.Lk)("div",{class:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"})],-1))),fe=[me],be={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ve={class:"bg-white p-6 rounded-lg shadow-lg text-center"},ke=ne((()=>(0,a.Lk)("h2",{class:"text-2xl font-bold mb-4"},"えほんがかんせいしました！🎉✨",-1))),xe=ne((()=>(0,a.Lk)("p",{class:"mb-4"},"「えほんをよむ」からよんでみよう。",-1)));function ye(e,t,o,l,r,s){return(0,a.uX)(),(0,a.CE)("div",ae,[le,re,se,(0,a.Lk)("div",ie,[(0,a.Lk)("div",null,[ce,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.ki=t),type:"text",id:"ki",class:"mt-2 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"むかしむかし、ある村にタロウという男の子がすんでいました。"},null,512),[[n.Jo,e.ki]])]),(0,a.Lk)("div",null,[ue,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.sho=t),type:"text",id:"sho",class:"mt-2 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"タロウはある日、山へぼうけんにいった。"},null,512),[[n.Jo,e.sho]])]),(0,a.Lk)("div",null,[de,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.ten=t),type:"text",id:"ten",class:"mt-2 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"山の中でタロウはおおきなドラゴンにあった。"},null,512),[[n.Jo,e.ten]])]),(0,a.Lk)("div",null,[pe,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.ketsu=t),type:"text",id:"ketsu",class:"mt-2 block w-full px-4 py-3 border border-gray-3000 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-lg",placeholder:"タロウはドラゴンと村でたのしく一緒にくらしました。"},null,512),[[n.Jo,e.ketsu]])]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...t)=>e.createPictureBook&&e.createPictureBook(...t)),disabled:!e.isFormValid,class:"w-1/2 min-w-[300px] py-3 px-6 bg-purple-600 hover:bg-purple-700 text-white text-lg font-semibold rounded-md shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 mx-auto block disabled:opacity-50 disabled:cursor-not-allowed"}," えほんをつくる🎉✨ ",8,ge)]),e.isLoading?((0,a.uX)(),(0,a.CE)("div",he,fe)):(0,a.Q3)("",!0),e.showCompletionPopup?((0,a.uX)(),(0,a.CE)("div",be,[(0,a.Lk)("div",ve,[ke,xe,(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...t)=>e.closeCompletionPopup&&e.closeCompletionPopup(...t)),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded"}," とじる ")])])):(0,a.Q3)("",!0)])}const we="https://us-central1-kids-ai-lab.cloudfunctions.net";async function Le(e,t){try{const o=await Ee(e,t),n=o.content_id,a=o.title,l=o.pages;return await Me(e,n,a,l)}catch(o){throw o instanceof Error?new Error("Failed to create and add contents: "+o.message):new Error("Failed to create and add contents: Unknown error")}}async function Ce(e,t){try{const o=t?`${we}/on_get_contents_list?google_id=${t}&page=${e}`:`${we}/on_get_contents_list?page=${e}`,n=o;console.log("url:",n);const a=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to get contents list");return await a.json()}catch(o){throw o instanceof Error?new Error("Failed to get contents list: "+o.message):new Error("Failed to get contents list: Unknown error")}}async function _e(e){try{const t=await fetch(we+"/on_get_contents_detail?content_id="+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to get content detail");return await t.json()}catch(t){throw t instanceof Error?new Error("Failed to get content detail: "+t.message):new Error("Failed to get content detail: Unknown error")}}async function Ee(e,t){const o=await fetch(we+"/on_make_contents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_id:e,text_data:t})});if(!o.ok)throw new Error("Failed to make contents");return await o.json()}async function Me(e,t,o,n){const a=await fetch(we+"/on_add_contents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_id:e,content_id:t,title:o,pages:n})});if(!a.ok)throw new Error("Failed to add contents");return await a.json()}var je=(0,a.pM)({name:"PictureBookCreate",setup(){const e=g(),t=(0,k.KR)(""),o=(0,k.KR)(""),n=(0,k.KR)(""),l=(0,k.KR)(""),r=(0,a.EW)((()=>""!==t.value.trim()&&""!==o.value.trim()&&""!==n.value.trim()&&""!==l.value.trim())),s=(0,k.KR)(!1),i=(0,k.KR)(!1),c=async()=>{if(e.uid){s.value=!0;const r=`${t.value} ${o.value} ${n.value} ${l.value}`;try{await Le(e.uid,r),s.value=!1,i.value=!0}catch(a){console.error("Error creating picture book:",a),s.value=!1,alert("えほんの作成中にエラーが発生しました。もう一度お試しください。")}}else console.error("User is not logged in"),e.clearUser()},u=()=>{i.value=!1};return{ki:t,sho:o,ten:n,ketsu:l,isFormValid:r,isLoading:s,showCompletionPopup:i,createPictureBook:c,closeCompletionPopup:u}}});const Pe=(0,i.A)(je,[["render",ye],["__scopeId","data-v-6b6fba8b"]]);var Se=Pe;const Fe=e=>((0,a.Qi)("data-v-c9cf31dc"),e=e(),(0,a.jt)(),e),Oe={class:"container mx-auto px-4 mt-[-20px]"},Re={class:"text-4xl font-bold mb-4 text-center text-purple-700 mb-12"},Te={class:"overflow-x-auto"},Ae={key:0,class:"flex justify-center items-center h-64"},Ue=Fe((()=>(0,a.Lk)("div",{class:"loadingSpinner"},null,-1))),Be=[Ue],Ie={key:1},We={key:0,class:"text-center text-xl text-gray-500 py-8"},Xe={key:1,class:"w-full bg-white rounded-lg overflow-hidden shadow-lg"},Ke=Fe((()=>(0,a.Lk)("thead",{class:"bg-purple-200"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-4 py-3 text-left text-xl sm:table-cell hidden"}," つくった日 "),(0,a.Lk)("th",{class:"px-4 py-3 text-left text-xl"},"タイトル"),(0,a.Lk)("th",{class:"px-4 py-3 text-center text-xl"})])],-1))),ze={class:"px-4 py-3 text-lg sm:table-cell hidden"},Ne={class:"px-4 py-3 text-lg"},$e={class:"px-4 py-3 text-center"},Ve=["onClick"],Ge={key:0,class:"mt-6 flex justify-center items-center"},qe=["disabled"],He={class:"text-xl"},Je=["disabled"];var Qe=(0,a.pM)({__name:"PictureBookRead",props:{mode:{}},setup(e,{expose:t}){const o=e,n=(0,k.KR)([]),l=(0,k.KR)(1),r=(0,k.KR)(!1),s=(0,k.KR)(!0),i=g(),c=async()=>{s.value=!0;try{let e;console.log("currentPage.value: ",l.value),"personal"===o.mode&&i.uid?(console.log("fetchBooks__personal"),e=await Ce(l.value,i.uid)):(console.log("fetchBooks__public"),e=await Ce(l.value)),n.value=e.contents||[],r.value=e.hasNextPage||!1}catch(e){console.error("Error fetching books:",e),n.value=[],r.value=!1}finally{s.value=!1}};(0,a.sV)(c),(0,a.wB)((()=>o.mode),(e=>{console.log("mode change:",e),c()}),{immediate:!0});const u=()=>{l.value>1&&(l.value--,c())},d=()=>{r.value&&(l.value++,c())},p=e=>{const t=new Date(e);return t.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},h=async e=>{console.log(`Reading book with ID: ${e}`);try{s.value=!0;const t=await _e(e);console.log("readBook__response: ",t);const o=t.pages,n=(0,k.KR)(0),l=(0,a.EW)((()=>o[n.value])),r=()=>{n.value<o.length-1&&n.value++},i=()=>{n.value>0&&n.value--},c=()=>{const e=document.createElement("div");e.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(255, 255, 255, 0.9);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n      ";const t=document.createElement("div");t.style.cssText="\n        background: #FFF9C4;\n        padding: 20px;\n        border-radius: 20px;\n        box-shadow: 0 0 20px rgba(0,0,0,0.2);\n        max-width: 95%;\n        max-height: 95%;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        position: relative;\n      ";const a=document.createElement("button");a.textContent="×",a.style.cssText="\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 36px;\n        cursor: pointer;\n        color: #FF6B6B;\n        width: 50px;\n        height: 50px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      ",a.onclick=()=>document.body.removeChild(e);const c=document.createElement("img");c.style.display="none",c.onload=()=>{s.value=!1,c.style.display="block"},c.src=l.value.page_url,c.style.cssText="\n        max-width: 100%;\n        height: auto;\n        max-height: 80vh;\n        object-fit: contain;\n        border-radius: 10px;\n        margin-bottom: 20px;\n      ";const u=document.createElement("div");u.style.cssText="\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        width: 100%;\n        max-width: 300px;\n      ";const d=document.createElement("div");d.style.cssText="\n        font-size: 18px;\n        margin: 0 10px;\n      ",d.textContent=`${n.value+1} / ${o.length}`;const p=(e,t)=>{const a=document.createElement("button");return a.textContent=e,a.style.cssText="\n          background: #4CAF50;\n          color: white;\n          border: none;\n          padding: 10px 20px;\n          border-radius: 20px;\n          font-size: 16px;\n          cursor: pointer;\n          transition: background 0.3s;\n        ",a.onmouseover=()=>a.style.background="#45a049",a.onmouseout=()=>a.style.background="#4CAF50",a.onclick=()=>{t(),c.src=l.value.page_url,d.textContent=`${n.value+1} / ${o.length}`},a},g=p("まえ",i),h=p("つぎ",r);u.appendChild(g),u.appendChild(d),u.appendChild(h),t.appendChild(a),t.appendChild(c),t.appendChild(u),e.appendChild(t),document.body.appendChild(e)};c()}catch(t){console.error("Error fetching books:",t),s.value=!1}},f=(0,a.EW)((()=>(console.log("props.mode: ",o.mode),"personal"===o.mode?"じぶんのえほんをよむ":"みんなのえほんをよむ"))),b=(0,a.EW)((()=>"personal"===o.mode?"fas fa-user-edit mr-2":"fas fa-users mr-2"));return t({books:n,currentPage:l,hasNextPage:r,prevPage:u,nextPage:d,formatDate:p,readBook:h,isLoading:s,pageTitle:f}),(e,t)=>((0,a.uX)(),(0,a.CE)("div",Oe,[(0,a.Lk)("h2",Re,[(0,a.Lk)("i",{class:(0,m.C4)(b.value)},null,2),(0,a.eW)(" "+(0,m.v_)(f.value),1)]),(0,a.Lk)("div",Te,[s.value?((0,a.uX)(),(0,a.CE)("div",Ae,Be)):((0,a.uX)(),(0,a.CE)("div",Ie,[0===n.value.length?((0,a.uX)(),(0,a.CE)("div",We," えほんはまだないよ。つくってみよう！ ")):((0,a.uX)(),(0,a.CE)("table",Xe,[Ke,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.value,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"border-b border-gray-200 hover:bg-purple-50"},[(0,a.Lk)("td",ze,(0,m.v_)(p(e.date)),1),(0,a.Lk)("td",Ne,(0,m.v_)(e.title),1),(0,a.Lk)("td",$e,[(0,a.Lk)("button",{onClick:t=>h(e.content_id),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 whitespace-nowrap"}," よむ ",8,Ve)])])))),128))])]))]))]),!s.value&&n.value.length>0&&(r.value||l.value>1)?((0,a.uX)(),(0,a.CE)("div",Ge,[(0,a.Lk)("button",{onClick:u,disabled:1===l.value,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full mr-4 disabled:opacity-50"}," まえ ",8,qe),(0,a.Lk)("span",He,(0,m.v_)(l.value),1),(0,a.Lk)("button",{onClick:d,disabled:!r.value,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full ml-4 disabled:opacity-50"}," つぎ ",8,Je)])):(0,a.Q3)("",!0)]))}});const De=(0,i.A)(Qe,[["__scopeId","data-v-c9cf31dc"]]);var Ye=De,Ze=o.p+"img/top.7471951f.jpg";const et=e=>((0,a.Qi)("data-v-6ed86075"),e=e(),(0,a.jt)(),e),tt={class:"min-h-screen flex"},ot={class:"w-full md:w-3/12 flex flex-col justify-center items-center bg-white"},nt=et((()=>(0,a.Lk)("img",{src:O,alt:"Logo",class:"absolute top-12 left-4 w-16 h-16",style:{height:"30px",width:"auto"}},null,-1))),at={class:"max-w-md w-full p-8",style:{"margin-top":"-300px"}},lt=et((()=>(0,a.Lk)("h2",{class:"text-3xl font-bold mb-6 text-left text-purple-700"}," Sign up ",-1))),rt=["disabled"],st={key:0},it={key:1,class:"flex items-center justify-center"},ct=et((()=>(0,a.Lk)("svg",{class:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24"},[(0,a.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,a.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1))),ut=et((()=>(0,a.Lk)("div",{class:"absolute bottom-4 text-sm text-gray-400"}," Powered by OCT-PATH ",-1))),dt=et((()=>(0,a.Lk)("div",{class:"hidden md:block md:w-9/12 relative"},[(0,a.Lk)("img",{src:Ze,alt:"Top Image",class:"absolute left-0 top-0 h-full w-full object-cover object-left"})],-1)));function pt(e,t,o,n,l,r){return(0,a.uX)(),(0,a.CE)("div",tt,[(0,a.Lk)("div",ot,[nt,(0,a.Lk)("div",at,[lt,(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.loginWithGoogle&&e.loginWithGoogle(...t)),class:"w-full py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75",disabled:e.isLoading},[e.isLoading?((0,a.uX)(),(0,a.CE)("span",it,[ct,(0,a.eW)(" Loading... ")])):((0,a.uX)(),(0,a.CE)("span",st,"Continue with Google"))],8,rt)]),ut]),dt])}const gt="https://us-central1-kids-ai-lab.cloudfunctions.net";async function ht(e,t,o){const n=await fetch(gt+"/on_add_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_id:e,name:t,image_url:o})});if(!n.ok)throw new Error("Failed to sign up");return await n.json()}var mt=ht,ft=(0,a.pM)({setup(){const e=g(),t=(0,d.rd)(),o=(0,k.KR)(!1),n=async()=>{o.value=!0;try{const o=await(0,w.df)(j,P),n=o.user;e.setUser(n),console.log("Login successful:",n.uid,n.displayName,n.photoURL),await mt(n.uid,n.displayName||"匿名ユーザー",n.photoURL||"https://www.gravatar.com/avatar/[MD5ハッシュ]?d=mp&s=200"),await t.push({name:"PictureBookCreate"}),console.log("push:",t.currentRoute.value.name)}catch(n){console.error("Google Sign-In Error: ",n)}o.value=!1};return{loginWithGoogle:n,isLoading:o}}});const bt=(0,i.A)(ft,[["render",pt],["__scopeId","data-v-6ed86075"]]);var vt=bt;const kt=[{path:"/",name:"LoginSns",component:vt},{path:"/contents",component:oe,meta:{requiresAuth:!0},children:[{path:"picture-book-create",name:"PictureBookCreate",component:Se,meta:{requiresAuth:!0}},{path:"picture-book-read",name:"PictureBookRead",component:Ye,meta:{requiresAuth:!0},props:()=>({mode:"personal"})},{path:"picture-book-read-public",name:"PictureBookReadPublic",component:Ye,meta:{requiresAuth:!0},props:()=>({mode:"all"})},{path:"",redirect:{name:"PictureBookCreate"}}]}],xt=(0,d.aE)({history:(0,d.LA)(),routes:kt});xt.beforeEach((async(e,t,o)=>{const n=g(),a=h();e.matched.some((e=>e.meta.requiresAuth))&&!n.uid?o({name:"LoginSns"}):("LoginSns"===e.name&&a.closeMenu(),o())}));var yt=xt;const wt=(0,n.Ef)(u),Lt=(0,p.Ey)();wt.use(yt),wt.use(Lt),wt.mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,l){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],l=e[u][2];for(var s=!0,i=0;i<n.length;i++)(!1&l||r>=l)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(s=!1,l<r&&(r=l));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,a,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,l,r=n[0],s=n[1],i=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(i)var u=i(o)}for(t&&t(n);c<r.length;c++)l=r[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(330)}));n=o.O(n)})();
//# sourceMappingURL=app.360da467.js.map